<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebAssembly Multiple Functions</title>
    <script src="math_operations.js"></script>
</head>
<body>
    <h1>Basic Math Operations</h1>
    
    <input type="number" id="inputA" placeholder="Enter first number">
    <input type="number" id="inputB" placeholder="Enter second number">
    
    <select id="operation">
        <option value="add">Add</option>
        <option value="subtract">Subtract</option>
        <option value="multiply">Multiply</option>
        <option value="divide">Divide</option>
    </select>

    <button onclick="execute()">Run</button>
    
    <p>Result: <span id="result"></span></p>

    <script>
        // WebAssemblyモジュールをロード
        var moduleInstance = Module();
        moduleInstance.onRuntimeInitialized = function() {
            console.log("WebAssembly module initialized.");
        };

        // 実行ボタンが押されたときに呼び出される関数
        function execute() {
            var a = parseInt(document.getElementById('inputA').value);
            var b = parseInt(document.getElementById('inputB').value);
            var operation = document.getElementById('operation').value;

            var result;
            
            // 選択された演算に応じて、対応するWebAssembly関数を呼び出す
            switch(operation) {
                case "add":
                    result = moduleInstance._add(a, b);
                    break;
                case "subtract":
                    result = moduleInstance._subtract(a, b);
                    break;
                case "multiply":
                    result = moduleInstance._multiply(a, b);
                    break;
                case "divide":
                    result = moduleInstance._divide(a, b);
                    break;
            }

            // 結果をHTMLに表示
            document.getElementById('result').innerText = result;
        }
    </script>
</body>
</html>
